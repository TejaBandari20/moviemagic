<!DOCTYPE html>
<html>
<head>
    <title>Book Tickets - MovieMagic</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script>
        function selectSeat(el) {
            el.classList.toggle('selected');
            updateSummary();
        }
        function updateSummary() {
            const seats = document.querySelectorAll('.seat.selected');
            const seatNumbers = Array.from(seats).map(s => s.innerText).join(', ');
            document.getElementById('selected_seats').value = seatNumbers;
            
            const price = Number("{{ price }}");
            const total = seats.length * price;
            document.getElementById('amount_display').innerText = '₹' + total;
            document.getElementById('amount_input').value = total;
        }
    </script>
</head>
<body>
    <form action="/tickets" method="POST" class="container">
        <input type="hidden" name="movie" value="{{ movie }}">
        <input type="hidden" name="theater" value="{{ theater }}">
        <input type="hidden" name="address" value="{{ address }}">
        <input type="hidden" name="seats" id="selected_seats" required>
        <input type="hidden" name="amount" id="amount_input">

        <div class="left">
            <h2>{{ movie }}</h2>
            <p>{{ theater }}<br>{{ address }}</p>
            <h3>Select Date & Time</h3>
            <input type="date" name="date" required>
            <select name="time" required>
                <option>10:00 AM</option>
                <option>01:00 PM</option>
                <option>04:00 PM</option>
                <option>07:00 PM</option>
            </select>
            
            <h3>Select Seats (₹{{ price }}/seat)</h3>
            <div class="seats">
                <div class="seat" onclick="selectSeat(this)">A1</div>
                <div class="seat" onclick="selectSeat(this)">A2</div>
                <div class="seat" onclick="selectSeat(this)">A3</div>
                <div class="seat" onclick="selectSeat(this)">B1</div>
                <div class="seat" onclick="selectSeat(this)">B2</div>
                <div class="seat" onclick="selectSeat(this)">B3</div>
            </div>
        </div>

        <div class="right">
            <h2>Booking Summary</h2>
            <p><strong>Total Amount:</strong> <span id="amount_display">₹0</span></p>
            <button type="submit" class="btn">CONFIRM BOOKING</button>
        </div>
    </form>
</body>
</html>